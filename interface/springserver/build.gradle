plugins {
    id 'org.hidetake.swagger.generator' version '2.9.0'
}

apply plugin: 'org.hidetake.swagger.generator'
apply plugin: 'java'

repositories {
    mavenCentral()
    jcenter()
}

sourceSets{
    main{
        java{
            srcDirs += ["${buildDir}/swagger"]
        }
    }
}

swaggerSources {
    beatheart {
        inputFile = file('../beatHeartServer.yaml')
        code {
            language = 'spring'
            configFile = file('swagger.conf.json')
        }
    }
}

 task copySwaggerOut(type: Copy){
     dependsOn generateSwaggerCodeBeatheart

     from("build/swagger-code-beatheart/src/main/java"){
         exclude "**/ApiResponseMessage.java"
         exclude "**/*Controller.java"
         exclude "**/io/"
         exclude "**/resources/"
         exclude ".swagger-codegen"
         exclude "README.md"
         exclude ".swagger-codegen-ignore"
         exclude "pom.xml"
     }
//     into sourceSets.main.java.srcDir().iterator().next();
     into "build/swagger"
 }

compileJava.dependsOn copySwaggerOut

apply from: 'dependencies.gradle'